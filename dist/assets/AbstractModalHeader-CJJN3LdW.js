import{o as ae,c as le,l as te}from"./useMergedRefs-WCic2-aU.js";import{u as $,a as Oe,b as we,c as ne}from"./useWindow-BytH33el.js";import{r,j as c,c as ke,p as Me}from"./index-yuUUyctO.js";import{u as v}from"./useEventCallback-D9iA8xtn.js";import{u as ce}from"./useMergedRefs-DpKCltFn.js";import{N as Ne}from"./NoopTransition-ol0NX5SZ.js";import{s as C,g as ue,i as je}from"./TransitionWrapper-6OoWT9pK.js";import{d as Le,q as x}from"./DataKey-COGXBUcQ.js";import{u as Ae}from"./useEventCallback-DSfWK9PI.js";import{P as _}from"./index-CI1nDiKN.js";const Be=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",Se=typeof document<"u",oe=Se||Be?r.useLayoutEffect:r.useEffect,De={"aria-label":_.string,onClick:_.func,variant:_.oneOf(["white"])},U=r.forwardRef(({className:e,variant:t,"aria-label":n="Close",...o},s)=>c.jsx("button",{ref:s,type:"button",className:ke("btn-close",t&&`btn-close-${t}`,e),"aria-label":n,...o}));U.displayName="CloseButton";U.propTypes=De;function G(e){e===void 0&&(e=ae());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function We(e){const t=r.useRef(e);return t.current=e,t}function Fe(e){const t=We(e);r.useEffect(()=>()=>t.current(),[])}function Pe(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const se=Le("modal-open");class X{constructor({ownerDocument:t,handleContainerOverflow:n=!0,isRTL:o=!1}={}){this.handleContainerOverflow=n,this.isRTL=o,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return Pe(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const n={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[o]:s.style[o]},t.scrollBarWidth&&(n[o]=`${parseInt(C(s,o)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(se,""),C(s,n)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const n=this.getElement();n.removeAttribute(se),Object.assign(n.style,t.style)}add(t){let n=this.modals.indexOf(t);return n!==-1||(n=this.modals.length,this.modals.push(t),this.setModalAttributes(t),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(t){const n=this.modals.indexOf(t);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const K=(e,t)=>le?e==null?(t||ae()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function Ie(e,t){const n=$(),[o,s]=r.useState(()=>K(e,n==null?void 0:n.document));if(!o){const i=K(e);i&&s(i)}return r.useEffect(()=>{},[t,o]),r.useEffect(()=>{const i=K(e);i!==o&&s(i)},[e,o]),o}const _e=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Ge(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function Ke(e){let{onEnter:t,onEntering:n,onEntered:o,onExit:s,onExiting:i,onExited:d,addEndListener:f,children:h}=e,u=Ge(e,_e);const g=r.useRef(null),E=ce(g,ue(h)),m=p=>T=>{p&&g.current&&p(g.current,T)},M=r.useCallback(m(t),[t]),N=r.useCallback(m(n),[n]),j=r.useCallback(m(o),[o]),L=r.useCallback(m(s),[s]),A=r.useCallback(m(i),[i]),B=r.useCallback(m(d),[d]),y=r.useCallback(m(f),[f]);return Object.assign({},u,{nodeRef:g},t&&{onEnter:M},n&&{onEntering:N},o&&{onEntered:j},s&&{onExit:L},i&&{onExiting:A},d&&{onExited:B},f&&{addEndListener:y},{children:typeof h=="function"?(p,T)=>h(p,Object.assign({},T,{ref:E})):r.cloneElement(h,{ref:E})})}const He=["component"];function Ve(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}const $e=r.forwardRef((e,t)=>{let{component:n}=e,o=Ve(e,He);const s=Ke(o);return c.jsx(n,Object.assign({ref:t},s))});function Ue({in:e,onTransition:t}){const n=r.useRef(null),o=r.useRef(!0),s=v(t);return oe(()=>{if(!n.current)return;let i=!1;return s({in:e,element:n.current,initial:o.current,isStale:()=>i}),()=>{i=!0}},[e,s]),oe(()=>(o.current=!1,()=>{o.current=!0}),[]),n}function Xe({children:e,in:t,onExited:n,onEntered:o,transition:s}){const[i,d]=r.useState(!t);t&&i&&d(!1);const f=Ue({in:!!t,onTransition:u=>{const g=()=>{u.isStale()||(u.in?o==null||o(u.element,u.initial):(d(!0),n==null||n(u.element)))};Promise.resolve(s(u)).then(g,E=>{throw u.in||d(!0),E})}}),h=ce(f,ue(e));return i&&!t?null:r.cloneElement(e,{ref:h})}function re(e,t,n){return e?c.jsx($e,Object.assign({},n,{component:e})):t?c.jsx(Xe,Object.assign({},n,{transition:t})):c.jsx(Ne,Object.assign({},n))}const Ye=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function qe(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}let H;function ze(e){return H||(H=new X({ownerDocument:e==null?void 0:e.document})),H}function Je(e){const t=$(),n=e||ze(t),o=r.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>n.add(o.current),remove:()=>n.remove(o.current),isTopModal:()=>n.isTopModal(o.current),setDialogRef:r.useCallback(s=>{o.current.dialog=s},[]),setBackdropRef:r.useCallback(s=>{o.current.backdrop=s},[])})}const de=r.forwardRef((e,t)=>{let{show:n=!1,role:o="dialog",className:s,style:i,children:d,backdrop:f=!0,keyboard:h=!0,onBackdropClick:u,onEscapeKeyDown:g,transition:E,runTransition:m,backdropTransition:M,runBackdropTransition:N,autoFocus:j=!0,enforceFocus:L=!0,restoreFocus:A=!0,restoreFocusOptions:B,renderDialog:y,renderBackdrop:p=a=>c.jsx("div",Object.assign({},a)),manager:T,container:fe,onShow:Y,onHide:q=()=>{},onExit:he,onExited:z,onExiting:ge,onEnter:me,onEntering:Ee,onEntered:pe}=e,be=qe(e,Ye);const b=$(),O=Ie(fe),l=Je(T),xe=Oe(),Re=we(n),[S,J]=r.useState(!n),w=r.useRef(null);r.useImperativeHandle(t,()=>l,[l]),le&&!Re&&n&&(w.current=G(b==null?void 0:b.document)),n&&S&&J(!1);const Q=v(()=>{if(l.add(),F.current=te(document,"keydown",Ce),W.current=te(document,"focus",()=>setTimeout(ve),!0),Y&&Y(),j){var a,ee;const I=G((a=(ee=l.dialog)==null?void 0:ee.ownerDocument)!=null?a:b==null?void 0:b.document);l.dialog&&I&&!ne(l.dialog,I)&&(w.current=I,l.dialog.focus())}}),D=v(()=>{if(l.remove(),F.current==null||F.current(),W.current==null||W.current(),A){var a;(a=w.current)==null||a.focus==null||a.focus(B),w.current=null}});r.useEffect(()=>{!n||!O||Q()},[n,O,Q]),r.useEffect(()=>{S&&D()},[S,D]),Fe(()=>{D()});const ve=v(()=>{if(!L||!xe()||!l.isTopModal())return;const a=G(b==null?void 0:b.document);l.dialog&&a&&!ne(l.dialog,a)&&l.dialog.focus()}),Te=v(a=>{a.target===a.currentTarget&&(u==null||u(a),f===!0&&q())}),Ce=v(a=>{h&&je(a)&&l.isTopModal()&&(g==null||g(a),a.defaultPrevented||q())}),W=r.useRef(),F=r.useRef(),ye=(...a)=>{J(!0),z==null||z(...a)};if(!O)return null;const Z=Object.assign({role:o,ref:l.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},be,{style:i,className:s,tabIndex:-1});let P=y?y(Z):c.jsx("div",Object.assign({},Z,{children:r.cloneElement(d,{role:"document"})}));P=re(E,m,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:he,onExiting:ge,onExited:ye,onEnter:me,onEntering:Ee,onEntered:pe,children:P});let k=null;return f&&(k=p({ref:l.setBackdropRef,onClick:Te}),k=re(M,N,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:k})),c.jsx(c.Fragment,{children:Me.createPortal(c.jsxs(c.Fragment,{children:[k,P]}),O)})});de.displayName="Modal";const ht=Object.assign(de,{Manager:X});function Qe(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Ze(e,t){e.classList?e.classList.add(t):Qe(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function ie(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function et(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=ie(e.className,t):e.setAttribute("class",ie(e.className&&e.className.baseVal||"",t))}const R={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class tt extends X{adjustAndStore(t,n,o){const s=n.style[t];n.dataset[t]=s,C(n,{[t]:`${parseFloat(C(n,t))+o}px`})}restore(t,n){const o=n.dataset[t];o!==void 0&&(delete n.dataset[t],C(n,{[t]:o}))}setContainerStyle(t){super.setContainerStyle(t);const n=this.getElement();if(Ze(n,"modal-open"),!t.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";x(n,R.FIXED_CONTENT).forEach(i=>this.adjustAndStore(o,i,t.scrollBarWidth)),x(n,R.STICKY_CONTENT).forEach(i=>this.adjustAndStore(s,i,-t.scrollBarWidth)),x(n,R.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(s,i,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const n=this.getElement();et(n,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";x(n,R.FIXED_CONTENT).forEach(i=>this.restore(o,i)),x(n,R.STICKY_CONTENT).forEach(i=>this.restore(s,i)),x(n,R.NAVBAR_TOGGLER).forEach(i=>this.restore(s,i))}}let V;function gt(e){return V||(V=new tt(e)),V}const nt=r.createContext({onHide(){}}),mt=r.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:n=!1,onHide:o,children:s,...i},d)=>{const f=r.useContext(nt),h=Ae(()=>{f==null||f.onHide(),o==null||o()});return c.jsxs("div",{ref:d,...i,children:[s,n&&c.jsx(U,{"aria-label":e,variant:t,onClick:h})]})});export{mt as A,ht as B,nt as M,tt as a,gt as g};
