import{r as x,j as e}from"./index-yuUUyctO.js";import{F as h,B as p,P as I}from"./constand-2MzKY2H2.js";import{u as S}from"./useDisclosure-BnWxVtk_.js";import{u as f,s as c}from"./index-CaWbZqE4.js";import{c as b,a as A,u as E}from"./useCategory-bLIT8vpL.js";import{u as G}from"./useCategoryGroups-DByGw6Tg.js";import{F as m}from"./index-D7ZmTkAm.js";import{M as N}from"./index-BEr-eB6r.js";import{I as k}from"./index-KHWGqfV2.js";import{S as w}from"./index-B81dbxI5.js";import{f as T}from"./format-DT9SbUHr.js";import{C as u}from"./Card-BQqG1lle.js";import{F as L}from"./Table-CSOoNIQu.js";import{R as M}from"./Row-Bd_6pW-A.js";import{C as P}from"./Col-C9voJz8y.js";import"./index-CBw9tgfC.js";import"./Anchor-Dl5sMHsj.js";import"./useEventCallback-D9iA8xtn.js";import"./Button-p2pLIQWZ.js";import"./categoryGroup-iGAh7MsX.js";import"./Input-DPA-4Z3o.js";import"./CardHeaderContext-CR2EohSr.js";import"./addEventListener-MtvHkOBD.js";import"./index-zwwZ_c_4.js";const B=({isOpen:i,toggle:a,refetch:n,category:r,setCategory:o})=>{const[s]=m.useForm(),{data:l}=G(),{isLoading:j,mutateAsync:C}=f(async t=>b(t)),{isLoading:y,mutateAsync:g}=f(async t=>A(r.id,t)),F=t=>{r?g(t,{onSuccess:()=>{c.success("Success!"),s.resetFields(),n(),o(null)},onError:()=>{c.error("Error!")}}):C({name:t.name,categoryGroupId:t.categoryGroupId},{onSuccess:()=>{c.success("Success!"),s.resetFields(),n(),a()},onError:()=>{c.error("Error!")}})};return x.useEffect(()=>{r&&(s.setFieldValue("name",r.name),s.setFieldValue("categoryGroupId",r.categoryGroupId))},[r]),e.jsx(N,{title:r?"Edit Category":"Add Category",open:i||!!r,onClose:()=>{r?o(null):a()},onCancel:()=>{r?o(null):a()},footer:null,destroyOnClose:!0,children:e.jsxs(m,{className:"mt-3",name:"basic",onFinish:F,autoComplete:"off",form:s,children:[e.jsx(m.Item,{label:"Name",name:"name",rules:[{required:!0,message:"Please enter the Category Name!"}],children:e.jsx(k,{})}),e.jsx(m.Item,{label:"Category Group",name:"categoryGroupId",rules:[{message:"Please select the category group!"}],children:e.jsx(w,{showSearch:!0,placeholder:"Select a category group",filterOption:(t,d)=>((d==null?void 0:d.label)??"").toLowerCase().includes(t.toLowerCase()),options:l==null?void 0:l.map(t=>({value:t.id,label:t.name}))})}),e.jsx(h,{className:"justify-content-end",children:e.jsx(m.Item,{label:null,children:e.jsx(p,{type:"primary",htmlType:"submit",loading:y||j,children:r?"Update Category":"Add Category"})})})]})})},O=({data:i,isFetching:a,setCategory:n})=>{const r=[{title:"Name",dataIndex:"name",key:"name",sort:!0},{title:"Created at",dataIndex:"createdAt",key:"createdAt",render:(o,s)=>e.jsx("div",{children:T(o)})},{title:"Action",dataIndex:"action",key:"action",render:(o,s)=>e.jsx(p,{onClick:()=>{n(s)},children:"Edit"})}];return e.jsx(u,{children:e.jsx(u.Body,{children:e.jsx(L,{columns:r,dataSource:i})})})},ie=()=>{const{isOpen:i,toggle:a}=S(),[n,r]=x.useState(),{data:o,isFetching:s,refetch:l}=E();return e.jsxs(e.Fragment,{children:[e.jsx(B,{category:n,setCategory:r,isOpen:i,toggle:a,refetch:l}),e.jsx(I,{title:"Categories"}),e.jsx(M,{children:e.jsx(P,{children:e.jsx(u,{children:e.jsx(h,{className:"p-2 justify-content-end",children:e.jsx(p,{onClick:a,children:"Add"})})})})}),e.jsx(O,{setCategory:r,data:o,isFetching:s})]})};export{ie as default};
