import{r as j,j as e}from"./index-yuUUyctO.js";import{F as y,B as u,P as G}from"./constand-2MzKY2H2.js";import{u as U}from"./useDisclosure-BnWxVtk_.js";import{u as x,s as c}from"./index-CaWbZqE4.js";import{c as A,u as N}from"./categoryGroup-iGAh7MsX.js";import{F as d}from"./index-D7ZmTkAm.js";import{M as E}from"./index-BEr-eB6r.js";import{I as k}from"./index-KHWGqfV2.js";import{U as w,R as T}from"./index-BB_1Ovp8.js";import{I as g}from"./index-CXAPcKyC.js";import{u as S}from"./useCategoryGroups-DByGw6Tg.js";import{f as R}from"./format-DT9SbUHr.js";import{C as p}from"./Card-BQqG1lle.js";import{F as D}from"./Table-CSOoNIQu.js";import{R as M}from"./Row-Bd_6pW-A.js";import{C as h}from"./Col-C9voJz8y.js";import"./index-CBw9tgfC.js";import"./Anchor-Dl5sMHsj.js";import"./useEventCallback-D9iA8xtn.js";import"./Button-p2pLIQWZ.js";import"./Input-DPA-4Z3o.js";import"./addEventListener-MtvHkOBD.js";import"./CardHeaderContext-CR2EohSr.js";import"./index-B81dbxI5.js";import"./index-zwwZ_c_4.js";const P=({isOpen:l,toggle:a,refetch:n,group:r,setGroup:o})=>{const[t]=d.useForm(),{isLoading:i,mutateAsync:C}=x(async s=>A({payload:s})),{isLoading:I,mutateAsync:F}=x(async s=>N(s)),b=s=>{var f;const m=new FormData;m.append("name",s.groupName),r?((f=s==null?void 0:s.image)!=null&&f.file&&m.append("file",s.image.file),F({id:r.id,payload:m},{onSuccess:()=>{c.success("Success!"),t.resetFields(),n(),o(null)},onError:()=>{c.error("Error!")}})):(m.append("file",s.image.file),C(m,{onSuccess:()=>{c.success("Success!"),t.resetFields(),n(),a()},onError:()=>{c.error("Error!")}}))};return j.useEffect(()=>{r&&t.setFieldValue("groupName",r.name)},[r]),e.jsx(E,{width:"45rem",title:r?"Edit Category Group":"Add Category",open:l||!!r,onClose:()=>{r?o(null):a()},onCancel:()=>{r?o(null):a()},footer:null,destroyOnClose:!0,children:e.jsxs(d,{className:"mt-3",name:"basic",onFinish:b,autoComplete:"off",form:t,children:[e.jsx(d.Item,{label:"Group Name",name:"groupName",rules:[{required:!0,message:"Please enter the Group Name!"}],children:e.jsx(k,{})}),e.jsx(d.Item,{label:"Group Image",name:"image",rules:[{required:!0,message:"Please upload the image!"}],children:e.jsx(w,{beforeUpload:()=>!1,listType:"picture-card",maxCount:1,children:e.jsxs("button",{style:{color:"inherit",cursor:"pointer",border:0,background:"none"},type:"button",children:[e.jsx(T,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})}),r&&e.jsxs("div",{className:"mt-3 ",children:[e.jsx("p",{children:"Current Image"}),e.jsx(g,{style:{width:150,height:150},src:r.file.mediumUrl})]}),e.jsx(y,{className:"justify-content-end",children:e.jsx(d.Item,{label:null,children:e.jsx(u,{type:"primary",htmlType:"submit",loading:i||I,children:r?"Update Group":"Add Group"})})})]})})},B=({data:l,isFetching:a,setGroup:n})=>{const r=[{title:"Image",dataIndex:"file.originalUrl",key:"file.originalUrl",render:(o,t)=>{var i;return e.jsx(g,{style:{height:50,width:50},src:(i=t==null?void 0:t.file)==null?void 0:i.originalUrl,alt:""})}},{title:"Name",dataIndex:"name",key:"name",sort:!0},{title:"Created At",dataIndex:"createdAt",key:"createdAt",render:(o,t)=>e.jsx("div",{children:R(o)})},{title:"Action",dataIndex:"action",key:"action",width:120,render:(o,t)=>e.jsx(u,{onClick:()=>{n(t)},children:"Edit"})}];return e.jsx(p,{children:e.jsx(p.Body,{children:e.jsx(D,{scroll:{y:700},loading:a,columns:r,dataSource:l})})})},me=()=>{const{isOpen:l,toggle:a}=U(),{data:n,isFetching:r,refetch:o}=S(),[t,i]=j.useState();return e.jsxs(e.Fragment,{children:[e.jsx(P,{group:t,isOpen:l,toggle:a,refetch:o,setGroup:i}),e.jsx(G,{title:"Categories Groups"}),e.jsx(M,{children:e.jsx(h,{children:e.jsx(p,{children:e.jsx(y,{className:"p-2 justify-content-end",children:e.jsx(u,{onClick:a,children:"Add"})})})})}),e.jsx(h,{children:e.jsx(p,{children:e.jsx(B,{setGroup:i,data:n,isFetching:r})})})]})};export{me as default};
