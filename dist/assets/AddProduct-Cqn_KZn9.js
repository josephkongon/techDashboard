import{r as u,j as e}from"./index-yuUUyctO.js";import{J as b}from"./jodit-react-Cwj5doD4.js";import{u as L}from"./useTranslation-BT0VEfT5.js";import{F as a}from"./index-D7ZmTkAm.js";import{C as O}from"./index-zwwZ_c_4.js";import{S as h}from"./index-B81dbxI5.js";import{I as y}from"./index-KHWGqfV2.js";import{u as N}from"./useCategory-bLIT8vpL.js";import{u as x,s as p}from"./index-CaWbZqE4.js";import{a as k,D as M,T as f,c as R,u as A}from"./product-3Nsfrse4.js";import{a as B,r as q}from"./general-BYphI6_b.js";import{u as z,a as U,F as G,B as D}from"./constand-2MzKY2H2.js";import{U as Q,R as V}from"./index-BB_1Ovp8.js";const j={"Mobile Phone":["model","operatingSystem","processor","ram","storage","batteryCapacity","screenSize","camera","simType","connectivity","chipset","connectionType","colors"],Laptop:["model","processor","ram","storage","graphicsCard","size","operatingSystem","screenSize","connectivity","chipset","connectionType","colors","gpuModel"],TV:["model","screenSize","resolution","displayType","smartTv","operatingSystem","connectivity","refreshRate","chipset","connectionType","colors"],Tablet:["model","operatingSystem","processor","ram","storage","size","camera","batteryCapacity","connectivity","screenSize","stylusSupport","chipset","connectionType","colors"],MacBook:["model","chip","ram","storage","size","batteryLife","operatingSystem","screenSize","ports","chipset","connectionType","colors"],Projector:["model","resolution","brightness","projectionTechnology","connectivity","aspectRatio","throwDistance","builtInSpeakers","chipset","connectionType","colors"],Camera:["model","cameraType","sensorSize","megapixels","lensMountType","videoResolution","iosRange","batteryLife","connectivity","screenType","chipset","connectionType","colors"]},W=["Red","Blue","Green","Black","White","Yellow","Pink","Purple","Gray","Orange","Brown","Cyan","Magenta","Gold","Silver","Beige","Teal","Navy","Maroon","Olive","Lime","Indigo","Violet","Turquoise","Lavender","Coral","Chocolate","Ivory","Amber","Mint","Rose","Salmon","Mustard","Peach","Plum","Azure","Burgundy","Crimson","Emerald","Khaki"],{Option:S}=h,_=({product:n})=>{const{t:c}=L();a.useForm();const[m,s]=u.useState(!1),[d,l]=u.useState(null);return u.useEffect(()=>{n!=null&&n.productType&&(s(!0),l(n.productType))},[n]),e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"mb-3",checked:m,onChange:t=>s(t.target.checked),children:"Enable Specifications"}),m&&e.jsxs(e.Fragment,{children:[e.jsx(a.Item,{label:"Product Type",name:"productType",children:e.jsx(h,{placeholder:"Select a product type",onChange:l,allowClear:!0,children:Object.keys(j).map(t=>e.jsx(S,{value:t,children:t},t))})}),d&&e.jsx(e.Fragment,{children:j[d].map(t=>e.jsx(a.Item,{name:t,label:c(t),style:{marginBottom:"8px"},children:t==="colors"?e.jsx(h,{mode:"multiple",placeholder:"Select available colors",showSearch:!0,optionLabelProp:"label",children:W.map(i=>e.jsx(S,{value:i,label:i,children:e.jsxs("span",{style:{display:"flex",alignItems:"center"},children:[e.jsx("span",{style:{backgroundColor:i.toLowerCase(),width:16,height:16,borderRadius:"50%",display:"inline-block",marginRight:8,border:"1px solid #ccc"}}),i]})},i))}):e.jsx(y,{placeholder:`Enter ${c(t)}`})},t))})]})]})},J=()=>{const{isLoading:n,refetch:c,isFetching:m,data:s}=z(["get-products"],async()=>k({}),{...U}),d=u.useMemo(()=>s==null?void 0:s.data.reduce((l,t)=>({...l,[t.id]:t}),{}),[s==null?void 0:s.data]);return{isLoading:n,isFetching:m,categoryObject:d,data:s==null?void 0:s.data,refetch:c}},le=({isOpen:n,toggle:c,refetch:m,product:s,setProduct:d})=>{const[l]=a.useForm(),{data:t}=N(),[i,g]=u.useState([]),{refetch:P}=J(),{isLoading:C,mutateAsync:T}=x(async r=>R(r)),{isLoading:I,mutateAsync:v}=x(async r=>A(s==null?void 0:s.id,r)),w=({fileList:r})=>{g(r)},F=r=>{if(s)v(r,{onSuccess:()=>{p.success("Success!"),l.resetFields(),m(),P(),d(null)},onError:()=>{p.error("Error!")}});else{const o=new FormData;if(!i.length){p.warning("Please select at least 1 image of the product");return}i.forEach(E=>{o.append("file",E.originFileObj)}),B(o,q(r)),T(o,{onSuccess:()=>{p.success("Success!"),l.resetFields(),g([]),m(),c()},onError:()=>{p.error("Error!")}})}};return u.useEffect(()=>{s&&l.setFieldsValue(s)},[s]),e.jsx(M,{width:"50rem",title:s?"Update Product":"Add New Product",open:n,onClose:()=>{s?d(null):c()},footer:null,children:e.jsxs(a,{labelCol:{span:6},wrapperCol:{span:20},style:{maxWidth:"45rem"},className:"mt-3",name:"basic",onFinish:F,autoComplete:"off",form:l,children:[e.jsx(a.Item,{label:"Product Name",name:"name",rules:[{required:!0,message:"Please enter the product name"}],children:e.jsx(y,{})}),e.jsx(a.Item,{label:"Brand",name:"brand",rules:[{required:!0,message:"Please enter the brand"}],children:e.jsx(y,{})}),e.jsx(a.Item,{label:"Price",name:"price",rules:[{required:!0,message:"Please enter the price"}],children:e.jsx(f,{min:1})}),e.jsx(a.Item,{label:"Quantity",name:"quantity",rules:[{required:!0,message:"Please enter quantity in stock"}],children:e.jsx(f,{min:1})}),e.jsx(a.Item,{label:"Product Description",name:"description",rules:[{required:!0,message:"Please enter the product description"}],children:e.jsx(b,{})}),e.jsx(a.Item,{label:"Product Summary",name:"summary",rules:[{message:"Please enter the product summary"}],children:e.jsx(b,{})}),e.jsx(a.Item,{label:"Product Category",name:"categoryId",rules:[{required:!0,message:"Please select the product category"}],children:e.jsx(h,{showSearch:!0,placeholder:"Select a category",filterOption:(r,o)=>((o==null?void 0:o.label)??"").toLowerCase().includes(r.toLowerCase()),options:t==null?void 0:t.map(r=>({value:r.id,label:r.name}))})}),e.jsx(a.Item,{label:"Product Tag",name:"tag",rules:[{message:"Please select the product tag"}],children:e.jsx(h,{showSearch:!0,placeholder:"Select a tag",filterOption:(r,o)=>((o==null?void 0:o.label)??"").toLowerCase().includes(r.toLowerCase()),options:[{value:"NEW",label:"New"},{value:"SECONDHAND",label:"Second hand"},{value:"COMING_SOON",label:"Coming soon"}]})}),!s&&e.jsx(a.Item,{label:"Group Image",rules:[{required:!0,message:"Please upload the image!"}],children:e.jsx(Q,{beforeUpload:()=>!1,listType:"picture-card",maxCount:5,fileList:i,onChange:w,children:e.jsxs("button",{style:{color:"inherit",cursor:"pointer",border:0,background:"none"},type:"button",children:[e.jsx(V,{}),e.jsx("div",{style:{marginTop:8},children:"Upload"})]})})}),e.jsx(_,{product:s}),e.jsx(G,{className:"justify-content-end mt-3",children:e.jsx(a.Item,{label:null,children:e.jsx(D,{loading:C||I,type:"primary",htmlType:"submit",children:s?"Update Product":"Add Product"})})})]})})};export{le as A,j as P,J as u};
