import{r as i,R as C,c as b}from"./index-yuUUyctO.js";import{i as we,x as U,g as ve,h as me,H as Ee,_ as ge,d as Ce,R as Ne,y as Re,p as _e,D as Fe,k as Ie}from"./index-CBw9tgfC.js";import{a4 as Oe,b as Pe,t as $e,a6 as pe,G as je,a7 as Be,a2 as Ae,p as ze,r as Ke,q as De,s as Ve,v as xe,w as he,x as Te}from"./constand-2MzKY2H2.js";var ke=["show"];function Le(e,u){return i.useMemo(function(){var c={};u&&(c.show=we(u)==="object"&&u.formatter?u.formatter:!!u),c=U(U({},c),e);var r=c,t=r.show,d=ve(r,ke);return U(U({},d),{},{show:!!t,showFormatter:typeof t=="function"?t:void 0,strategy:d.strategy||function(g){return g.length}})},[e,u])}var Me=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],Ue=i.forwardRef(function(e,u){var c=e.autoComplete,r=e.onChange,t=e.onFocus,d=e.onBlur,g=e.onPressEnter,p=e.onKeyDown,E=e.onKeyUp,j=e.prefixCls,x=j===void 0?"rc-input":j,N=e.disabled,H=e.htmlSize,Y=e.className,Z=e.maxLength,B=e.suffix,W=e.showCount,A=e.count,R=e.type,ee=R===void 0?"text":R,ne=e.classes,v=e.classNames,m=e.styles,z=e.onCompositionStart,K=e.onCompositionEnd,te=ve(e,Me),ae=i.useState(!1),D=me(ae,2),se=D[0],a=D[1],O=i.useRef(!1),h=i.useRef(!1),o=i.useRef(null),P=i.useRef(null),V=function(n){o.current&&$e(o.current,n)},re=Oe(e.defaultValue,{value:e.value}),q=me(re,2),T=q[0],y=q[1],k=T==null?"":String(T),ue=i.useState(null),G=me(ue,2),w=G[0],oe=G[1],f=Le(A,W),_=f.max||Z,F=f.strategy(k),le=!!_&&F>_;i.useImperativeHandle(u,function(){var s;return{focus:V,blur:function(){var l;(l=o.current)===null||l===void 0||l.blur()},setSelectionRange:function(l,M,$){var I;(I=o.current)===null||I===void 0||I.setSelectionRange(l,M,$)},select:function(){var l;(l=o.current)===null||l===void 0||l.select()},input:o.current,nativeElement:((s=P.current)===null||s===void 0?void 0:s.nativeElement)||o.current}}),i.useEffect(function(){h.current&&(h.current=!1),a(function(s){return s&&N?!1:s})},[N]);var J=function(n,l,M){var $=l;if(!O.current&&f.exceedFormatter&&f.max&&f.strategy(l)>f.max){if($=f.exceedFormatter(l,{max:f.max}),l!==$){var I,de;oe([((I=o.current)===null||I===void 0?void 0:I.selectionStart)||0,((de=o.current)===null||de===void 0?void 0:de.selectionEnd)||0])}}else if(M.source==="compositionEnd")return;y($),o.current&&pe(o.current,n,r,$)};i.useEffect(function(){if(w){var s;(s=o.current)===null||s===void 0||s.setSelectionRange.apply(s,Ee(w))}},[w]);var ie=function(n){J(n,n.target.value,{source:"change"})},ce=function(n){O.current=!1,J(n,n.currentTarget.value,{source:"compositionEnd"}),K==null||K(n)},fe=function(n){g&&n.key==="Enter"&&!h.current&&(h.current=!0,g(n)),p==null||p(n)},Q=function(n){n.key==="Enter"&&(h.current=!1),E==null||E(n)},X=function(n){a(!0),t==null||t(n)},S=function(n){h.current&&(h.current=!1),a(!1),d==null||d(n)},L=function(n){y(""),V(),o.current&&pe(o.current,n,r)},ye=le&&"".concat(x,"-out-of-range"),Se=function(){var n=je(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return C.createElement("input",ge({autoComplete:c},n,{onChange:ie,onFocus:X,onBlur:S,onKeyDown:fe,onKeyUp:Q,className:b(x,Ce({},"".concat(x,"-disabled"),N),v==null?void 0:v.input),style:m==null?void 0:m.input,ref:o,size:H,type:ee,onCompositionStart:function(M){O.current=!0,z==null||z(M)},onCompositionEnd:ce}))},be=function(){var n=Number(_)>0;if(B||f.show){var l=f.showFormatter?f.showFormatter({value:k,count:F,maxLength:_}):"".concat(F).concat(n?" / ".concat(_):"");return C.createElement(C.Fragment,null,f.show&&C.createElement("span",{className:b("".concat(x,"-show-count-suffix"),Ce({},"".concat(x,"-show-count-has-suffix"),!!B),v==null?void 0:v.count),style:U({},m==null?void 0:m.count)},l),B)}return null};return C.createElement(Pe,ge({},te,{prefixCls:x,className:b(Y,ye),handleReset:L,value:k,focused:se,triggerFocus:V,suffix:be(),disabled:N,classes:ne,classNames:v,styles:m}),Se())});const He=e=>{let u;return typeof e=="object"&&(e!=null&&e.clearIcon)?u=e:e&&(u={clearIcon:C.createElement(Ne,null)}),u};function We(e,u){const c=i.useRef([]),r=()=>{c.current.push(setTimeout(()=>{var t,d,g,p;!((t=e.current)===null||t===void 0)&&t.input&&((d=e.current)===null||d===void 0?void 0:d.input.getAttribute("type"))==="password"&&(!((g=e.current)===null||g===void 0)&&g.input.hasAttribute("value"))&&((p=e.current)===null||p===void 0||p.input.removeAttribute("value"))}))};return i.useEffect(()=>(u&&r(),()=>c.current.forEach(t=>{t&&clearTimeout(t)})),[]),r}function qe(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var Ge=function(e,u){var c={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&u.indexOf(r)<0&&(c[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var t=0,r=Object.getOwnPropertySymbols(e);t<r.length;t++)u.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(c[r[t]]=e[r[t]]);return c};const Ye=i.forwardRef((e,u)=>{const{prefixCls:c,bordered:r=!0,status:t,size:d,disabled:g,onBlur:p,onFocus:E,suffix:j,allowClear:x,addonAfter:N,addonBefore:H,className:Y,style:Z,styles:B,rootClassName:W,onChange:A,classNames:R,variant:ee}=e,ne=Ge(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:v,direction:m,allowClear:z,autoComplete:K,className:te,style:ae,classNames:D,styles:se}=Re("input"),a=v("input",c),O=i.useRef(null),h=_e(a),[o,P,V]=Be(a,W),[re]=Ae(a,h),{compactSize:q,compactItemClassnames:T}=ze(a,m),y=Ke(S=>{var L;return(L=d??q)!==null&&L!==void 0?L:S}),k=C.useContext(Fe),ue=g??k,{status:G,hasFeedback:w,feedbackIcon:oe}=i.useContext(De),f=Te(G,t),_=qe(e)||!!w;i.useRef(_);const F=We(O,!0),le=S=>{F(),p==null||p(S)},J=S=>{F(),E==null||E(S)},ie=S=>{F(),A==null||A(S)},ce=(w||j)&&C.createElement(C.Fragment,null,j,w&&oe),fe=He(x??z),[Q,X]=Ve("input",ee,r);return o(re(C.createElement(Ue,Object.assign({ref:Ie(u,O),prefixCls:a,autoComplete:K},ne,{disabled:ue,onBlur:le,onFocus:J,style:Object.assign(Object.assign({},ae),Z),styles:Object.assign(Object.assign({},se),B),suffix:ce,allowClear:fe,className:b(Y,W,V,h,T,te),onChange:ie,addonBefore:H&&C.createElement(xe,{form:!0,space:!0},H),addonAfter:N&&C.createElement(xe,{form:!0,space:!0},N),classNames:Object.assign(Object.assign(Object.assign({},R),D),{input:b({[`${a}-sm`]:y==="small",[`${a}-lg`]:y==="large",[`${a}-rtl`]:m==="rtl"},R==null?void 0:R.input,D.input,P),variant:b({[`${a}-${Q}`]:X},he(a,f)),affixWrapper:b({[`${a}-affix-wrapper-sm`]:y==="small",[`${a}-affix-wrapper-lg`]:y==="large",[`${a}-affix-wrapper-rtl`]:m==="rtl"},P),wrapper:b({[`${a}-group-rtl`]:m==="rtl"},P),groupWrapper:b({[`${a}-group-wrapper-sm`]:y==="small",[`${a}-group-wrapper-lg`]:y==="large",[`${a}-group-wrapper-rtl`]:m==="rtl",[`${a}-group-wrapper-${Q}`]:X},he(`${a}-group-wrapper`,f,w),P)})}))))});export{Ye as I,Le as a,He as g,We as u};
