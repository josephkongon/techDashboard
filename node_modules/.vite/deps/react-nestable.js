import {
  require_object_assign
} from "./chunk-T5TDCSU7.js";
import {
  require_classnames
} from "./chunk-CCL26HJW.js";
import {
  require_react
} from "./chunk-TJOSTKI6.js";
import {
  __commonJS
} from "./chunk-LK32TJAX.js";

// node_modules/react-addons-shallow-compare/index.js
var require_react_addons_shallow_compare = __commonJS({
  "node_modules/react-addons-shallow-compare/index.js"(exports, module) {
    "use strict";
    var hasOwnProperty = Object.prototype.hasOwnProperty;
    function is(x, y) {
      if (x === y) {
        return x !== 0 || y !== 0 || 1 / x === 1 / y;
      } else {
        return x !== x && y !== y;
      }
    }
    function shallowEqual(objA, objB) {
      if (is(objA, objB)) {
        return true;
      }
      if (typeof objA !== "object" || objA === null || typeof objB !== "object" || objB === null) {
        return false;
      }
      var keysA = Object.keys(objA);
      var keysB = Object.keys(objB);
      if (keysA.length !== keysB.length) {
        return false;
      }
      for (var i = 0; i < keysA.length; i++) {
        if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {
          return false;
        }
      }
      return true;
    }
    function shallowCompare(instance, nextProps, nextState) {
      return !shallowEqual(instance.props, nextProps) || !shallowEqual(instance.state, nextState);
    }
    module.exports = shallowCompare;
  }
});

// node_modules/react-addons-update/index.js
var require_react_addons_update = __commonJS({
  "node_modules/react-addons-update/index.js"(exports, module) {
    "use strict";
    var _assign = require_object_assign();
    var hasOwnProperty = {}.hasOwnProperty;
    var validateFormat = function validateFormat2(format) {
    };
    if (true) {
      validateFormat = function validateFormat2(format) {
        if (format === void 0) {
          throw new Error("invariant requires an error message argument");
        }
      };
    }
    function invariant(condition, format, a, b, c, d, e, f) {
      validateFormat(format);
      if (!condition) {
        var error;
        if (format === void 0) {
          error = new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
        } else {
          var args = [a, b, c, d, e, f];
          var argIndex = 0;
          error = new Error(format.replace(/%s/g, function() {
            return args[argIndex++];
          }));
          error.name = "Invariant Violation";
        }
        error.framesToPop = 1;
        throw error;
      }
    }
    function shallowCopy(x) {
      if (Array.isArray(x)) {
        return x.concat();
      } else if (x && typeof x === "object") {
        return _assign(new x.constructor(), x);
      } else {
        return x;
      }
    }
    var COMMAND_PUSH = "$push";
    var COMMAND_UNSHIFT = "$unshift";
    var COMMAND_SPLICE = "$splice";
    var COMMAND_SET = "$set";
    var COMMAND_MERGE = "$merge";
    var COMMAND_APPLY = "$apply";
    var ALL_COMMANDS_LIST = [
      COMMAND_PUSH,
      COMMAND_UNSHIFT,
      COMMAND_SPLICE,
      COMMAND_SET,
      COMMAND_MERGE,
      COMMAND_APPLY
    ];
    var ALL_COMMANDS_SET = {};
    ALL_COMMANDS_LIST.forEach(function(command) {
      ALL_COMMANDS_SET[command] = true;
    });
    function invariantArrayCase(value, spec, command) {
      invariant(
        Array.isArray(value),
        "update(): expected target of %s to be an array; got %s.",
        command,
        value
      );
      var specValue = spec[command];
      invariant(
        Array.isArray(specValue),
        "update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",
        command,
        specValue
      );
    }
    function update(value, spec) {
      invariant(
        typeof spec === "object",
        "update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",
        ALL_COMMANDS_LIST.join(", "),
        COMMAND_SET
      );
      if (hasOwnProperty.call(spec, COMMAND_SET)) {
        invariant(
          Object.keys(spec).length === 1,
          "Cannot have more than one key in an object with %s",
          COMMAND_SET
        );
        return spec[COMMAND_SET];
      }
      var nextValue = shallowCopy(value);
      if (hasOwnProperty.call(spec, COMMAND_MERGE)) {
        var mergeObj = spec[COMMAND_MERGE];
        invariant(
          mergeObj && typeof mergeObj === "object",
          "update(): %s expects a spec of type 'object'; got %s",
          COMMAND_MERGE,
          mergeObj
        );
        invariant(
          nextValue && typeof nextValue === "object",
          "update(): %s expects a target of type 'object'; got %s",
          COMMAND_MERGE,
          nextValue
        );
        _assign(nextValue, spec[COMMAND_MERGE]);
      }
      if (hasOwnProperty.call(spec, COMMAND_PUSH)) {
        invariantArrayCase(value, spec, COMMAND_PUSH);
        spec[COMMAND_PUSH].forEach(function(item) {
          nextValue.push(item);
        });
      }
      if (hasOwnProperty.call(spec, COMMAND_UNSHIFT)) {
        invariantArrayCase(value, spec, COMMAND_UNSHIFT);
        spec[COMMAND_UNSHIFT].forEach(function(item) {
          nextValue.unshift(item);
        });
      }
      if (hasOwnProperty.call(spec, COMMAND_SPLICE)) {
        invariant(
          Array.isArray(value),
          "Expected %s target to be an array; got %s",
          COMMAND_SPLICE,
          value
        );
        invariant(
          Array.isArray(spec[COMMAND_SPLICE]),
          "update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",
          COMMAND_SPLICE,
          spec[COMMAND_SPLICE]
        );
        spec[COMMAND_SPLICE].forEach(function(args) {
          invariant(
            Array.isArray(args),
            "update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",
            COMMAND_SPLICE,
            spec[COMMAND_SPLICE]
          );
          nextValue.splice.apply(nextValue, args);
        });
      }
      if (hasOwnProperty.call(spec, COMMAND_APPLY)) {
        invariant(
          typeof spec[COMMAND_APPLY] === "function",
          "update(): expected spec of %s to be a function; got %s.",
          COMMAND_APPLY,
          spec[COMMAND_APPLY]
        );
        nextValue = spec[COMMAND_APPLY](nextValue);
      }
      for (var k in spec) {
        if (!(ALL_COMMANDS_SET.hasOwnProperty(k) && ALL_COMMANDS_SET[k])) {
          nextValue[k] = update(value[k], spec[k]);
        }
      }
      return nextValue;
    }
    module.exports = update;
  }
});

// node_modules/react-nestable/dist/utils.js
var require_utils = __commonJS({
  "node_modules/react-nestable/dist/utils.js"(exports) {
    "use strict";
    var __assign = exports && exports.__assign || function() {
      __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
        }
        return t;
      };
      return __assign.apply(this, arguments);
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.getAllNonEmptyNodesIds = exports.listWithChildren = exports.getTransformProps = exports.getTotalScroll = exports.getOffsetRect = exports.closest = exports.isArray = exports.isString = exports.isNumber = exports.isFunction = exports.isUndefined = exports.isDefined = exports.objectType = void 0;
    var objectType = function(obj) {
      return Object.prototype.toString.call(obj).slice(8, -1);
    };
    exports.objectType = objectType;
    var isDefined = function(param) {
      return typeof param !== "undefined";
    };
    exports.isDefined = isDefined;
    var isUndefined = function(param) {
      return typeof param === "undefined";
    };
    exports.isUndefined = isUndefined;
    var isFunction = function(param) {
      return typeof param === "function";
    };
    exports.isFunction = isFunction;
    var isNumber = function(param) {
      return typeof param === "number" && !isNaN(param);
    };
    exports.isNumber = isNumber;
    var isString = function(param) {
      return (0, exports.objectType)(param) === "String";
    };
    exports.isString = isString;
    var isArray = function(param) {
      return (0, exports.objectType)(param) === "Array";
    };
    exports.isArray = isArray;
    var closest = function(target, selector) {
      while (target) {
        if (target.matches && target.matches(selector))
          return target;
        target = target.parentNode;
      }
      return null;
    };
    exports.closest = closest;
    var getOffsetRect = function(elem) {
      var box = elem.getBoundingClientRect();
      var body = document.body;
      var docElem = document.documentElement;
      var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;
      var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;
      var clientTop = docElem.clientTop || body.clientTop || 0;
      var clientLeft = docElem.clientLeft || body.clientLeft || 0;
      var top = box.top + scrollTop - clientTop;
      var left = box.left + scrollLeft - clientLeft;
      return { top: Math.round(top), left: Math.round(left) };
    };
    exports.getOffsetRect = getOffsetRect;
    var getTotalScroll = function(elem) {
      var top = 0;
      var left = 0;
      while (elem = elem.parentNode) {
        top += elem.scrollTop || 0;
        left += elem.scrollLeft || 0;
      }
      return { top, left };
    };
    exports.getTotalScroll = getTotalScroll;
    var getTransformProps = function(x, y) {
      return {
        transform: "translate(".concat(x, "px, ").concat(y, "px)")
      };
    };
    exports.getTransformProps = getTransformProps;
    var listWithChildren = function(list, childrenProp) {
      return list.map(function(item) {
        var _a;
        return __assign(__assign({}, item), (_a = {}, _a[childrenProp] = item[childrenProp] ? (0, exports.listWithChildren)(item[childrenProp], childrenProp) : [], _a));
      });
    };
    exports.listWithChildren = listWithChildren;
    var getAllNonEmptyNodesIds = function(items, _a) {
      var idProp = _a.idProp, childrenProp = _a.childrenProp;
      var childrenIds = [];
      var ids = items.filter(function(item) {
        var _a2;
        return (_a2 = item[childrenProp]) === null || _a2 === void 0 ? void 0 : _a2.length;
      }).map(function(item) {
        childrenIds = childrenIds.concat((0, exports.getAllNonEmptyNodesIds)(item[childrenProp], { idProp, childrenProp }));
        return item[idProp];
      });
      return ids.concat(childrenIds);
    };
    exports.getAllNonEmptyNodesIds = getAllNonEmptyNodesIds;
  }
});

// node_modules/react-nestable/dist/Icon/Icon.js
var require_Icon = __commonJS({
  "node_modules/react-nestable/dist/Icon/Icon.js"(exports) {
    "use strict";
    var __extends = exports && exports.__extends || /* @__PURE__ */ function() {
      var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
          d2.__proto__ = b2;
        } || function(d2, b2) {
          for (var p in b2) if (Object.prototype.hasOwnProperty.call(b2, p)) d2[p] = b2[p];
        };
        return extendStatics(d, b);
      };
      return function(d, b) {
        if (typeof b !== "function" && b !== null)
          throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
          this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
      };
    }();
    var __assign = exports && exports.__assign || function() {
      __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
        }
        return t;
      };
      return __assign.apply(this, arguments);
    };
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      var desc = Object.getOwnPropertyDescriptor(m, k);
      if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() {
          return m[k];
        } };
      }
      Object.defineProperty(o, k2, desc);
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
      Object.defineProperty(o, "default", { enumerable: true, value: v });
    } : function(o, v) {
      o["default"] = v;
    });
    var __importStar = exports && exports.__importStar || function(mod) {
      if (mod && mod.__esModule) return mod;
      var result = {};
      if (mod != null) {
        for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
      }
      __setModuleDefault(result, mod);
      return result;
    };
    var __rest = exports && exports.__rest || function(s, e) {
      var t = {};
      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
      if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
            t[p[i]] = s[p[i]];
        }
      return t;
    };
    var __importDefault = exports && exports.__importDefault || function(mod) {
      return mod && mod.__esModule ? mod : { "default": mod };
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    var react_1 = __importStar(require_react());
    var classnames_1 = __importDefault(require_classnames());
    var Icon = (
      /** @class */
      function(_super) {
        __extends(Icon2, _super);
        function Icon2() {
          return _super !== null && _super.apply(this, arguments) || this;
        }
        Icon2.prototype.render = function() {
          var _a = this.props, children = _a.children, className = _a.className, isCollapsed = _a.isCollapsed, props = __rest(_a, ["children", "className", "isCollapsed"]);
          var finalClassName = (0, classnames_1.default)("nestable-icon", className, {
            "nestable-icon--plus-gray": isCollapsed,
            "nestable-icon--minus-gray": !isCollapsed
          });
          return react_1.default.createElement("i", __assign({ className: finalClassName }, props));
        };
        return Icon2;
      }(react_1.PureComponent)
    );
    exports.default = Icon;
  }
});

// node_modules/react-nestable/dist/Icon/index.js
var require_Icon2 = __commonJS({
  "node_modules/react-nestable/dist/Icon/index.js"(exports) {
    "use strict";
    var __importDefault = exports && exports.__importDefault || function(mod) {
      return mod && mod.__esModule ? mod : { "default": mod };
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    var Icon_1 = __importDefault(require_Icon());
    exports.default = Icon_1.default;
  }
});

// node_modules/react-nestable/dist/Nestable/NestableItem.js
var require_NestableItem = __commonJS({
  "node_modules/react-nestable/dist/Nestable/NestableItem.js"(exports) {
    "use strict";
    var __extends = exports && exports.__extends || /* @__PURE__ */ function() {
      var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
          d2.__proto__ = b2;
        } || function(d2, b2) {
          for (var p in b2) if (Object.prototype.hasOwnProperty.call(b2, p)) d2[p] = b2[p];
        };
        return extendStatics(d, b);
      };
      return function(d, b) {
        if (typeof b !== "function" && b !== null)
          throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
          this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
      };
    }();
    var __assign = exports && exports.__assign || function() {
      __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
        }
        return t;
      };
      return __assign.apply(this, arguments);
    };
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      var desc = Object.getOwnPropertyDescriptor(m, k);
      if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() {
          return m[k];
        } };
      }
      Object.defineProperty(o, k2, desc);
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
      Object.defineProperty(o, "default", { enumerable: true, value: v });
    } : function(o, v) {
      o["default"] = v;
    });
    var __importStar = exports && exports.__importStar || function(mod) {
      if (mod && mod.__esModule) return mod;
      var result = {};
      if (mod != null) {
        for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
      }
      __setModuleDefault(result, mod);
      return result;
    };
    var __importDefault = exports && exports.__importDefault || function(mod) {
      return mod && mod.__esModule ? mod : { "default": mod };
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    var react_1 = __importStar(require_react());
    var classnames_1 = __importDefault(require_classnames());
    var Icon_1 = __importDefault(require_Icon2());
    var NestableItem = (
      /** @class */
      function(_super) {
        __extends(NestableItem2, _super);
        function NestableItem2() {
          var _this = _super !== null && _super.apply(this, arguments) || this;
          _this.renderCollapseIcon = function(_a) {
            var isCollapsed = _a.isCollapsed;
            return react_1.default.createElement(Icon_1.default, { className: "nestable-item-icon", isCollapsed });
          };
          _this.onMouseEnter = function(e) {
            var _a = _this.props, item = _a.item, options = _a.options;
            return options.onMouseEnter(e, item);
          };
          _this.onDragStart = function(e) {
            var _a = _this.props, item = _a.item, options = _a.options;
            return options.onDragStart(e, item);
          };
          return _this;
        }
        NestableItem2.prototype.render = function() {
          var _a;
          var _b = this.props, item = _b.item, isCopy = _b.isCopy, options = _b.options, index = _b.index, depth = _b.depth;
          var dragItem = options.dragItem, renderItem = options.renderItem, handler = options.handler, disableCollapse = options.disableCollapse, disableDrag = options.disableDrag, idProp = options.idProp, childrenProp = options.childrenProp, checkIfCollapsed = options.checkIfCollapsed, _c = options.renderCollapseIcon, renderCollapseIcon = _c === void 0 ? this.renderCollapseIcon : _c;
          var isCollapsed = checkIfCollapsed(item);
          var isDragging = !isCopy && dragItem && dragItem[idProp] === item[idProp];
          var hasChildren = item[childrenProp] && item[childrenProp].length > 0;
          var isDraggable = true;
          var rowProps = {};
          var handlerProps = {};
          var wrappedHandler;
          if (!isCopy) {
            if (dragItem) {
              rowProps = __assign(__assign({}, rowProps), { onMouseEnter: this.onMouseEnter });
            } else {
              if (typeof disableDrag === "function") {
                isDraggable = disableDrag({ item, index, depth });
              } else if (typeof disableDrag !== "undefined") {
                isDraggable = !disableDrag;
              }
              if (isDraggable) {
                handlerProps = __assign(__assign({}, handlerProps), { draggable: true, onDragStart: this.onDragStart });
              }
            }
          }
          if (handler) {
            wrappedHandler = react_1.default.createElement("span", __assign({ className: "nestable-item-handler" }, handlerProps), handler);
          } else {
            rowProps = __assign(__assign({}, rowProps), handlerProps);
          }
          var handleCollapseIconClick = disableCollapse ? void 0 : function() {
            return options.onToggleCollapse(item);
          };
          var collapseIcon = hasChildren ? react_1.default.createElement("span", { onClick: handleCollapseIconClick }, renderCollapseIcon({ isCollapsed, item })) : null;
          var baseClassName = "nestable-item".concat(isCopy ? "-copy" : "");
          var itemProps = {
            className: (0, classnames_1.default)(baseClassName, "".concat(baseClassName, "-").concat(item[idProp]), (_a = {
              "is-dragging": isDragging
            }, _a["".concat(baseClassName, "--with-children")] = hasChildren, _a["".concat(baseClassName, "--children-open")] = hasChildren && !isCollapsed, _a["".concat(baseClassName, "--children-collapsed")] = hasChildren && isCollapsed, _a["".concat(baseClassName, "--children-no-collapse")] = hasChildren && disableCollapse, _a))
          };
          var content = renderItem({
            collapseIcon,
            depth,
            handler: wrappedHandler,
            index,
            isDraggable,
            item
          });
          if (!content)
            return null;
          return react_1.default.createElement(
            "li",
            __assign({}, itemProps),
            react_1.default.createElement("div", __assign({ className: "nestable-item-name" }, rowProps), content),
            hasChildren && !isCollapsed && react_1.default.createElement("ol", { className: "nestable-list" }, item[childrenProp].map(function(item2, i) {
              return react_1.default.createElement(NestableItem2, { key: i, index: i, depth: depth + 1, item: item2, options, isCopy });
            }))
          );
        };
        NestableItem2.defaultProps = {
          depth: 0
        };
        return NestableItem2;
      }(react_1.PureComponent)
    );
    exports.default = NestableItem;
  }
});

// node_modules/react-nestable/dist/Nestable/Nestable.js
var require_Nestable = __commonJS({
  "node_modules/react-nestable/dist/Nestable/Nestable.js"(exports) {
    "use strict";
    var __extends = exports && exports.__extends || /* @__PURE__ */ function() {
      var extendStatics = function(d, b) {
        extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d2, b2) {
          d2.__proto__ = b2;
        } || function(d2, b2) {
          for (var p in b2) if (Object.prototype.hasOwnProperty.call(b2, p)) d2[p] = b2[p];
        };
        return extendStatics(d, b);
      };
      return function(d, b) {
        if (typeof b !== "function" && b !== null)
          throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
        extendStatics(d, b);
        function __() {
          this.constructor = d;
        }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
      };
    }();
    var __assign = exports && exports.__assign || function() {
      __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
          s = arguments[i];
          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
        }
        return t;
      };
      return __assign.apply(this, arguments);
    };
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      var desc = Object.getOwnPropertyDescriptor(m, k);
      if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() {
          return m[k];
        } };
      }
      Object.defineProperty(o, k2, desc);
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __setModuleDefault = exports && exports.__setModuleDefault || (Object.create ? function(o, v) {
      Object.defineProperty(o, "default", { enumerable: true, value: v });
    } : function(o, v) {
      o["default"] = v;
    });
    var __importStar = exports && exports.__importStar || function(mod) {
      if (mod && mod.__esModule) return mod;
      var result = {};
      if (mod != null) {
        for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
      }
      __setModuleDefault(result, mod);
      return result;
    };
    var __spreadArray = exports && exports.__spreadArray || function(to, from, pack) {
      if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
          if (!ar) ar = Array.prototype.slice.call(from, 0, i);
          ar[i] = from[i];
        }
      }
      return to.concat(ar || Array.prototype.slice.call(from));
    };
    var __importDefault = exports && exports.__importDefault || function(mod) {
      return mod && mod.__esModule ? mod : { "default": mod };
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    var react_1 = __importStar(require_react());
    var react_addons_shallow_compare_1 = __importDefault(require_react_addons_shallow_compare());
    var react_addons_update_1 = __importDefault(require_react_addons_update());
    var classnames_1 = __importDefault(require_classnames());
    var utils_1 = require_utils();
    var NestableItem_1 = __importDefault(require_NestableItem());
    var Nestable = (
      /** @class */
      function(_super) {
        __extends(Nestable2, _super);
        function Nestable2(props) {
          var _this = _super.call(this, props) || this;
          _this.el = null;
          _this.elCopyStyles = null;
          _this.mouse = {
            last: { x: 0 },
            shift: { x: 0 }
          };
          _this.collapse = function(itemIds) {
            var _a = _this.props, idProp = _a.idProp, childrenProp = _a.childrenProp, collapsed = _a.collapsed;
            var items = _this.state.items;
            if (itemIds === "NONE") {
              _this.setState({
                collapsedItems: collapsed ? (0, utils_1.getAllNonEmptyNodesIds)(items, { idProp, childrenProp }) : []
              });
            } else if (itemIds === "ALL") {
              _this.setState({
                collapsedItems: collapsed ? [] : (0, utils_1.getAllNonEmptyNodesIds)(items, { idProp, childrenProp })
              });
            } else if ((0, utils_1.isArray)(itemIds)) {
              _this.setState({
                collapsedItems: (0, utils_1.getAllNonEmptyNodesIds)(items, { idProp, childrenProp }).filter(function(id) {
                  return itemIds.indexOf(id) > -1 !== collapsed;
                })
              });
            }
          };
          _this.startTrackMouse = function() {
            document.addEventListener("mousemove", _this.onMouseMove);
            document.addEventListener("mouseup", _this.onDragEnd);
            document.addEventListener("keydown", _this.onKeyDown);
          };
          _this.stopTrackMouse = function() {
            document.removeEventListener("mousemove", _this.onMouseMove);
            document.removeEventListener("mouseup", _this.onDragEnd);
            document.removeEventListener("keydown", _this.onKeyDown);
            _this.elCopyStyles = null;
          };
          _this.getItemDepth = function(item) {
            var childrenProp = _this.props.childrenProp;
            var level = 1;
            if (item[childrenProp].length > 0) {
              var childrenDepths = item[childrenProp].map(_this.getItemDepth);
              level += Math.max.apply(Math, childrenDepths);
            }
            return level;
          };
          _this.checkIfCollapsed = function(item) {
            var _a = _this.props, collapsed = _a.collapsed, idProp = _a.idProp;
            var collapsedItems = _this.state.collapsedItems;
            return !!(collapsedItems.indexOf(item[idProp]) > -1 !== collapsed);
          };
          _this.onDragStart = function(e, item) {
            var onDragStart = _this.props.onDragStart;
            e.preventDefault();
            e.stopPropagation();
            if (!(e.target instanceof Element))
              return;
            _this.el = (0, utils_1.closest)(e.target, ".nestable-item");
            _this.startTrackMouse();
            _this.onMouseMove(e);
            onDragStart({ dragItem: item });
            _this.setState({
              dragItem: item,
              itemsOld: _this.state.items
            });
          };
          _this.onDragEnd = function(e, isCancel) {
            var onDragEnd = _this.props.onDragEnd;
            e === null || e === void 0 ? void 0 : e.preventDefault();
            _this.stopTrackMouse();
            _this.el = null;
            onDragEnd();
            isCancel ? _this.dragRevert() : _this.dragApply();
          };
          _this.onMouseMove = function(e) {
            var _a = _this.props, group = _a.group, threshold = _a.threshold;
            var dragItem = _this.state.dragItem;
            var clientX = e.clientX, clientY = e.clientY;
            var transformProps = (0, utils_1.getTransformProps)(clientX, clientY);
            var elCopy = document.querySelector(".nestable-".concat(group, " .nestable-drag-layer > .nestable-list"));
            if (!_this.elCopyStyles) {
              var offset = (0, utils_1.getOffsetRect)(_this.el);
              var scroll_1 = (0, utils_1.getTotalScroll)(_this.el);
              _this.elCopyStyles = __assign({ marginTop: offset.top - clientY - scroll_1.top, marginLeft: offset.left - clientX - scroll_1.left }, transformProps);
            } else {
              _this.elCopyStyles = __assign(__assign({}, _this.elCopyStyles), transformProps);
              Object.keys(transformProps).forEach(function(key) {
                elCopy.style[key] = transformProps[key];
              });
              var diffX = clientX - _this.mouse.last.x;
              if (diffX >= 0 && _this.mouse.shift.x >= 0 || diffX <= 0 && _this.mouse.shift.x <= 0) {
                _this.mouse.shift.x += diffX;
              } else {
                _this.mouse.shift.x = 0;
              }
              _this.mouse.last.x = clientX;
              if (Math.abs(_this.mouse.shift.x) > threshold) {
                if (_this.mouse.shift.x > 0) {
                  _this.tryIncreaseDepth(dragItem);
                } else {
                  _this.tryDecreaseDepth(dragItem);
                }
                _this.mouse.shift.x = 0;
              }
            }
          };
          _this.onMouseEnter = function(e, item) {
            e.preventDefault();
            e.stopPropagation();
            var _a = _this.props, collapsed = _a.collapsed, idProp = _a.idProp, childrenProp = _a.childrenProp;
            var dragItem = _this.state.dragItem;
            if (dragItem[idProp] === item[idProp])
              return;
            var pathFrom = _this.getPathById(dragItem[idProp]);
            var pathTo = _this.getPathById(item[idProp]);
            var collapseProps = {};
            if (collapsed && pathFrom.length > 1) {
              var parent_1 = _this.getItemByPath(pathFrom.slice(0, -1));
              if (parent_1[childrenProp].length === 1) {
                collapseProps = _this.onToggleCollapse(parent_1, true);
              }
            }
            _this.moveItem({ dragItem, pathFrom, pathTo }, collapseProps);
          };
          _this.onToggleCollapse = function(item, isGetter) {
            var _a = _this.props, collapsed = _a.collapsed, idProp = _a.idProp;
            var collapsedItems = _this.state.collapsedItems;
            var isCollapsed = _this.checkIfCollapsed(item);
            var newState = {
              collapsedItems: isCollapsed !== collapsed ? collapsedItems.filter(function(id) {
                return id !== item[idProp];
              }) : collapsedItems.concat(item[idProp])
            };
            if (isGetter) {
              return newState;
            } else {
              _this.setState(newState);
              _this.onCollapseChange(newState.collapsedItems);
            }
          };
          _this.onCollapseChange = function(ids) {
            var _a = _this.props, collapsed = _a.collapsed, onCollapseChange = _a.onCollapseChange;
            onCollapseChange(collapsed ? { openIds: ids } : { closedIds: ids });
          };
          _this.onKeyDown = function(e) {
            if (e.which === 27) {
              _this.onDragEnd(null, true);
            }
          };
          _this.state = {
            items: [],
            itemsOld: null,
            dragItem: null,
            isDirty: false,
            collapsedItems: []
          };
          return _this;
        }
        Nestable2.prototype.componentDidMount = function() {
          var _a = this.props, items = _a.items, childrenProp = _a.childrenProp;
          items = (0, utils_1.listWithChildren)(items, childrenProp);
          this.setState({ items });
        };
        Nestable2.prototype.componentDidUpdate = function(prevProps) {
          var _this = this;
          var _a = this, _b = _a.props, itemsNew = _b.items, childrenProp = _b.childrenProp, state = _a.state;
          var isPropsChanged = (0, react_addons_shallow_compare_1.default)(__assign(__assign({}, this), { props: prevProps, state }), this.props, state);
          if (isPropsChanged) {
            this.stopTrackMouse();
            this.setState(function(prevState) {
              var newState = __assign(__assign({}, prevState), { items: (0, utils_1.listWithChildren)(itemsNew, childrenProp), dragItem: null, isDirty: false });
              if (prevProps.collapsed !== _this.props.collapsed) {
                newState.collapsedItems = [];
                _this.onCollapseChange(newState.collapsedItems);
              }
              return newState;
            });
          }
        };
        Nestable2.prototype.componentWillUnmount = function() {
          this.stopTrackMouse();
        };
        Nestable2.prototype.moveItem = function(_a, extraProps) {
          var dragItem = _a.dragItem, pathFrom = _a.pathFrom, pathTo = _a.pathTo;
          if (extraProps === void 0) {
            extraProps = {};
          }
          var _b = this.props, childrenProp = _b.childrenProp, confirmChange = _b.confirmChange;
          var dragItemSize = this.getItemDepth(dragItem);
          var items = this.state.items;
          var realPathTo = this.getRealNextPath(pathFrom, pathTo, dragItemSize);
          if (realPathTo.length === 0)
            return;
          var destinationPath = realPathTo.length > pathTo.length ? pathTo : pathTo.slice(0, -1);
          var destinationParent = this.getItemByPath(destinationPath);
          if (!confirmChange({ dragItem, destinationParent }))
            return;
          var removePath = this.getSplicePath(pathFrom, {
            numToRemove: 1,
            childrenProp
          });
          var insertPath = this.getSplicePath(realPathTo, {
            numToRemove: 0,
            itemsToInsert: [dragItem],
            childrenProp
          });
          items = (0, react_addons_update_1.default)(items, removePath);
          items = (0, react_addons_update_1.default)(items, insertPath);
          this.setState(function(prevState) {
            return __assign(__assign(__assign({}, prevState), { items, isDirty: true }), extraProps);
          });
          if (extraProps.collapsedItems !== this.state.collapsedItems) {
            this.onCollapseChange(extraProps.collapsedItems);
          }
        };
        Nestable2.prototype.tryIncreaseDepth = function(dragItem) {
          var _a = this.props, maxDepth = _a.maxDepth, idProp = _a.idProp, childrenProp = _a.childrenProp, collapsed = _a.collapsed;
          var pathFrom = this.getPathById(dragItem[idProp]);
          var itemIndex = pathFrom[pathFrom.length - 1];
          var newDepth = pathFrom.length + this.getItemDepth(dragItem);
          if (itemIndex > 0 && newDepth <= maxDepth) {
            var prevSibling = this.getItemByPath(pathFrom.slice(0, -1).concat(itemIndex - 1));
            if (!prevSibling[childrenProp].length || !this.checkIfCollapsed(prevSibling)) {
              var pathTo = pathFrom.slice(0, -1).concat(itemIndex - 1).concat(prevSibling[childrenProp].length);
              var collapseProps = {};
              if (collapsed && !prevSibling[childrenProp].length) {
                collapseProps = this.onToggleCollapse(prevSibling, true);
              }
              this.moveItem({ dragItem, pathFrom, pathTo }, collapseProps);
            }
          }
        };
        Nestable2.prototype.tryDecreaseDepth = function(dragItem) {
          var _a = this.props, idProp = _a.idProp, childrenProp = _a.childrenProp, collapsed = _a.collapsed;
          var pathFrom = this.getPathById(dragItem[idProp]);
          var itemIndex = pathFrom[pathFrom.length - 1];
          if (pathFrom.length > 1) {
            var parent_2 = this.getItemByPath(pathFrom.slice(0, -1));
            if (itemIndex + 1 === parent_2[childrenProp].length) {
              var pathTo = pathFrom.slice(0, -1);
              pathTo[pathTo.length - 1] += 1;
              var collapseProps = {};
              if (collapsed && parent_2[childrenProp].length === 1) {
                collapseProps = this.onToggleCollapse(parent_2, true);
              }
              this.moveItem({ dragItem, pathFrom, pathTo }, collapseProps);
            }
          }
        };
        Nestable2.prototype.dragApply = function() {
          var _a = this.props, onChange = _a.onChange, idProp = _a.idProp;
          var _b = this.state, items = _b.items, isDirty = _b.isDirty, dragItem = _b.dragItem;
          this.setState({
            itemsOld: null,
            dragItem: null,
            isDirty: false
          });
          if (onChange && isDirty) {
            var targetPath = this.getPathById(dragItem[idProp], items);
            onChange({ items, dragItem, targetPath });
          }
        };
        Nestable2.prototype.dragRevert = function() {
          var itemsOld = this.state.itemsOld;
          this.setState({
            items: itemsOld,
            itemsOld: null,
            dragItem: null,
            isDirty: false
          });
        };
        Nestable2.prototype.getPathById = function(id, items) {
          var _this = this;
          if (items === void 0) {
            items = this.state.items;
          }
          var _a = this.props, idProp = _a.idProp, childrenProp = _a.childrenProp;
          var path = [];
          items.every(function(item, i) {
            if (item[idProp] === id) {
              path.push(i);
            } else if (item[childrenProp]) {
              var childrenPath = _this.getPathById(id, item[childrenProp]);
              if (childrenPath.length) {
                path = path.concat(i).concat(childrenPath);
              }
            }
            return path.length === 0;
          });
          return path;
        };
        Nestable2.prototype.getItemByPath = function(path, items) {
          if (items === void 0) {
            items = this.state.items;
          }
          var childrenProp = this.props.childrenProp;
          var item = null;
          path.forEach(function(index) {
            var list = item ? item[childrenProp] : items;
            item = list[index];
          });
          return item;
        };
        Nestable2.prototype.getSplicePath = function(path, options) {
          if (options === void 0) {
            options = {};
          }
          var splicePath = {};
          var numToRemove = options.numToRemove || 0;
          var itemsToInsert = options.itemsToInsert || [];
          var lastIndex = path.length - 1;
          var currentPath = splicePath;
          path.forEach(function(index, i) {
            var _a;
            if (i === lastIndex) {
              currentPath.$splice = [__spreadArray([index, numToRemove], itemsToInsert, true)];
            } else {
              var nextPath = {};
              currentPath[index] = (_a = {}, _a[options.childrenProp] = nextPath, _a);
              currentPath = nextPath;
            }
          });
          return splicePath;
        };
        Nestable2.prototype.getRealNextPath = function(prevPath, nextPath, dragItemSize) {
          var _a = this.props, childrenProp = _a.childrenProp, maxDepth = _a.maxDepth;
          var ppLastIndex = prevPath.length - 1;
          var npLastIndex = nextPath.length - 1;
          var newDepth = nextPath.length + dragItemSize - 1;
          if (prevPath.length < nextPath.length) {
            var wasShifted_1 = false;
            if (newDepth > maxDepth && nextPath.length) {
              return this.getRealNextPath(prevPath, nextPath.slice(0, -1), dragItemSize);
            }
            return nextPath.map(function(nextIndex, i) {
              if (wasShifted_1) {
                return i === npLastIndex ? nextIndex + 1 : nextIndex;
              }
              if (typeof prevPath[i] !== "number") {
                return nextIndex;
              }
              if (nextPath[i] > prevPath[i] && i === ppLastIndex) {
                wasShifted_1 = true;
                return nextIndex - 1;
              }
              return nextIndex;
            });
          } else if (prevPath.length === nextPath.length) {
            if (nextPath[npLastIndex] > prevPath[npLastIndex]) {
              var target = this.getItemByPath(nextPath);
              if (newDepth < maxDepth && target[childrenProp] && target[childrenProp].length && !this.checkIfCollapsed(target)) {
                return nextPath.slice(0, -1).concat(nextPath[npLastIndex] - 1).concat(0);
              }
            }
          }
          return nextPath;
        };
        Nestable2.prototype.getItemOptions = function() {
          var _a = this.props, renderItem = _a.renderItem, renderCollapseIcon = _a.renderCollapseIcon, handler = _a.handler, disableCollapse = _a.disableCollapse, disableDrag = _a.disableDrag, idProp = _a.idProp, childrenProp = _a.childrenProp;
          var dragItem = this.state.dragItem;
          return {
            dragItem,
            idProp,
            childrenProp,
            disableCollapse,
            disableDrag,
            renderItem,
            renderCollapseIcon,
            handler,
            checkIfCollapsed: this.checkIfCollapsed,
            onDragStart: this.onDragStart,
            onMouseEnter: this.onMouseEnter,
            onToggleCollapse: this.onToggleCollapse
          };
        };
        Nestable2.prototype.renderDragLayer = function() {
          var _a = this.props, group = _a.group, idProp = _a.idProp;
          var dragItem = this.state.dragItem;
          var el = document.querySelector(".nestable-".concat(group, " .nestable-item-").concat(dragItem[idProp]));
          var listStyles = {};
          if (el) {
            listStyles.width = el.clientWidth;
          }
          if (this.elCopyStyles) {
            listStyles = __assign(__assign({}, listStyles), this.elCopyStyles);
          }
          var options = this.getItemOptions();
          return react_1.default.createElement(
            "div",
            { className: "nestable-drag-layer" },
            react_1.default.createElement(
              "ol",
              { className: "nestable-list", style: listStyles },
              react_1.default.createElement(NestableItem_1.default, { item: dragItem, options, isCopy: true })
            )
          );
        };
        Nestable2.prototype.render = function() {
          var _a = this.props, group = _a.group, className = _a.className, idProp = _a.idProp;
          var _b = this.state, items = _b.items, dragItem = _b.dragItem;
          var options = this.getItemOptions();
          return react_1.default.createElement(
            "div",
            { className: (0, classnames_1.default)(className, "nestable", "nestable-".concat(group), { "is-drag-active": dragItem }) },
            react_1.default.createElement("ol", { className: "nestable-list" }, items.map(function(item, i) {
              return react_1.default.createElement(NestableItem_1.default, { key: item[idProp], index: i, item, options });
            })),
            dragItem && this.renderDragLayer()
          );
        };
        Nestable2.defaultProps = {
          childrenProp: "children",
          collapsed: false,
          confirmChange: function() {
            return true;
          },
          disableCollapse: false,
          disableDrag: false,
          group: Math.random().toString(36).slice(2),
          idProp: "id",
          items: [],
          maxDepth: 10,
          onChange: function() {
          },
          onCollapseChange: function() {
          },
          onDragEnd: function() {
          },
          onDragStart: function() {
          },
          renderItem: function(_a) {
            var item = _a.item;
            return String(item);
          },
          threshold: 30
        };
        return Nestable2;
      }(react_1.Component)
    );
    exports.default = Nestable;
  }
});

// node_modules/react-nestable/dist/Nestable/index.js
var require_Nestable2 = __commonJS({
  "node_modules/react-nestable/dist/Nestable/index.js"(exports) {
    "use strict";
    var __importDefault = exports && exports.__importDefault || function(mod) {
      return mod && mod.__esModule ? mod : { "default": mod };
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    var Nestable_1 = __importDefault(require_Nestable());
    exports.default = Nestable_1.default;
  }
});

// node_modules/react-nestable/dist/types.js
var require_types = __commonJS({
  "node_modules/react-nestable/dist/types.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
  }
});

// node_modules/react-nestable/dist/index.js
var require_dist = __commonJS({
  "node_modules/react-nestable/dist/index.js"(exports) {
    var __createBinding = exports && exports.__createBinding || (Object.create ? function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      var desc = Object.getOwnPropertyDescriptor(m, k);
      if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() {
          return m[k];
        } };
      }
      Object.defineProperty(o, k2, desc);
    } : function(o, m, k, k2) {
      if (k2 === void 0) k2 = k;
      o[k2] = m[k];
    });
    var __exportStar = exports && exports.__exportStar || function(m, exports2) {
      for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports2, p)) __createBinding(exports2, m, p);
    };
    var __importDefault = exports && exports.__importDefault || function(mod) {
      return mod && mod.__esModule ? mod : { "default": mod };
    };
    Object.defineProperty(exports, "__esModule", { value: true });
    var Nestable_1 = __importDefault(require_Nestable2());
    __exportStar(require_types(), exports);
    exports.default = Nestable_1.default;
  }
});
export default require_dist();
//# sourceMappingURL=react-nestable.js.map
