{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { Spinner } from 'spin.js';\r\n\r\nexport const XS = 'xs'\r\nexport const S = 's'\r\nexport const L = 'l'\r\nexport const XL = 'xl'\r\n\r\nexport const SIZES = [XS, S, L, XL] as const\r\n\r\nexport const CONTRACT = 'contract'\r\nexport const CONTRACT_OVERLAY = 'contract-overlay'\r\nexport const EXPAND_LEFT = 'expand-left'\r\nexport const EXPAND_RIGHT = 'expand-right'\r\nexport const EXPAND_UP = 'expand-up'\r\nexport const EXPAND_DOWN = 'expand-down'\r\nexport const SLIDE_LEFT = 'slide-left'\r\nexport const SLIDE_RIGHT = 'slide-right'\r\nexport const SLIDE_UP = 'slide-up'\r\nexport const SLIDE_DOWN = 'slide-down'\r\nexport const ZOOM_IN = 'zoom-in'\r\nexport const ZOOM_OUT = 'zoom-out'\r\n\r\nexport const STYLES = [\r\n  EXPAND_LEFT,\r\n  EXPAND_RIGHT,\r\n  EXPAND_UP,\r\n  EXPAND_DOWN,\r\n  CONTRACT,\r\n  CONTRACT_OVERLAY,\r\n  ZOOM_IN,\r\n  ZOOM_OUT,\r\n  SLIDE_LEFT,\r\n  SLIDE_RIGHT,\r\n  SLIDE_UP,\r\n  SLIDE_DOWN,\r\n] as const\r\n\r\nexport interface LaddaButtonProps {\r\n  className?: string;\r\n  progress?: number;\r\n  loading?: boolean;\r\n  disabled?: boolean;\r\n  'data-color'?: string;\r\n  'data-size'?: typeof SIZES[number];\r\n  'data-style'?: typeof STYLES[number];\r\n  'data-spinner-size'?: number;\r\n  'data-spinner-color'?: string;\r\n  'data-spinner-lines'?: number;\r\n}\r\n\r\nexport const LaddaButton: React.FC<LaddaButtonProps & React.ButtonHTMLAttributes<HTMLButtonElement>> = React.memo(\r\n  ({className, children, disabled, loading, progress, ...restProps}) => {\r\n  \r\n  const buttonRef = useRef<HTMLButtonElement>(null);\r\n  const spinner = useRef<Spinner>();\r\n  const timer = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    if(loading){\r\n      timer.current && clearTimeout(timer.current);\r\n      const createSpinner = () => {\r\n        var height = buttonRef.current ? buttonRef.current.offsetHeight : 0,\r\n            spinnerColor,\r\n            spinnerLines;\r\n    \r\n        if (height === 0) {\r\n            // We may have an element that is not visible so\r\n            // we attempt to get the height in a different way\r\n            if(buttonRef.current)\r\n              height = parseFloat(window.getComputedStyle(buttonRef.current).height);\r\n        }\r\n    \r\n        // If the button is tall we can afford some padding\r\n        if (height > 32) {\r\n            height *= 0.8;\r\n        }\r\n    \r\n        // Prefer an explicit height if one is defined\r\n        if (restProps[\"data-spinner-size\"]) {\r\n            height = restProps[\"data-spinner-size\"] || 10;\r\n        }\r\n    \r\n        // Allow buttons to specify the color of the spinner element\r\n        if (restProps['data-spinner-color']) {\r\n            spinnerColor = restProps['data-spinner-color'];\r\n        }\r\n    \r\n        // Allow buttons to specify the number of lines of the spinner\r\n        if (restProps['data-spinner-lines']) {\r\n            spinnerLines = restProps['data-spinner-lines'] || 12\r\n        }\r\n    \r\n        var radius = height * 0.2,\r\n            length = radius * 0.6,\r\n            width = radius < 7 ? 2 : 3;\r\n    \r\n        return new Spinner({\r\n            color: spinnerColor || '#fff',\r\n            lines: spinnerLines || 12,\r\n            radius: radius,\r\n            length: length,\r\n            width: width,\r\n            animation: 'ladda-spinner-line-fade',\r\n            top: 'auto',\r\n            left: 'auto',\r\n            className: ''\r\n        });\r\n      }\r\n\r\n      if(!spinner.current) spinner.current = createSpinner();\r\n        spinner.current?.spin(buttonRef.current?.querySelector('.ladda-spinner') as HTMLElement||undefined);\r\n    } else{\r\n      if (spinner) {\r\n        //make sure the spinner keeps spinning for the button contracting animation\r\n        const tv = timer.current = setTimeout(function() { spinner.current?.stop(); }, 1000);\r\n        return ()=>clearTimeout(tv);\r\n      }\r\n    }\r\n\r\n    //ts doesn't like sometimesy returns\r\n    return undefined;\r\n  }, [loading])\r\n\r\n  const dloadingProp = loading ? {'data-loading':''} : {};\r\n  restProps = {...restProps, 'data-style': restProps['data-style'] || EXPAND_LEFT}; //set default data-style\r\n\r\n  return (\r\n    <button\r\n      {...dloadingProp}\r\n      {...restProps}\r\n      className={`ladda-button ${className || ''}`}\r\n      ref={buttonRef}\r\n      disabled={disabled || loading}\r\n    >\r\n      <span className=\"ladda-label\">{children}</span>\r\n      <span className=\"ladda-spinner\"></span>\r\n      {!!progress &&\r\n        <div\r\n          className=\"ladda-progress\"\r\n          style={{width: ((Math.max(Math.min(progress||0, 1), 0)) * (buttonRef.current?.offsetWidth||0)) + 'px'}}>\r\n        </div>\r\n      }\r\n    </button>\r\n  )\r\n});\r\n\r\nexport default LaddaButton;"],"names":["XS","S","L","XL","SIZES","CONTRACT","CONTRACT_OVERLAY","EXPAND_LEFT","EXPAND_RIGHT","EXPAND_UP","EXPAND_DOWN","SLIDE_LEFT","SLIDE_RIGHT","SLIDE_UP","SLIDE_DOWN","ZOOM_IN","ZOOM_OUT","STYLES","LaddaButton","React","memo","className","children","disabled","loading","progress","restProps","buttonRef","useRef","spinner","timer","useEffect","current","clearTimeout","createSpinner","height","offsetHeight","spinnerColor","spinnerLines","parseFloat","window","getComputedStyle","radius","length","width","Spinner","color","lines","animation","top","left","spin","querySelector","undefined","tv","setTimeout","stop","dloadingProp","ref","style","Math","max","min","offsetWidth"],"mappings":"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"}